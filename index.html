<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta charset="utf-8">
  <title>Scythe charts</title>
  <meta name="description" content="Scythe charts">
  <meta name="author" content="Dimitris Raviolos">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="https://fonts.googleapis.com/css?family=Open+Sans|Sail" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/chartist.js/latest/chartist.min.css">
  <link rel="shortcut icon" type="image/x-icon" href="favicon.ico"/>
  <style>
    body, html {
      margin: 0;
      font-family: 'Open Sans', sans-serif;
      font-weight: bolder;
      height: 100%
    }

    h3 {
      font-family: 'Sail', cursive
    }

    .grid {
      min-height: 100%;
      display: flex;
      flex-wrap: wrap;
      flex-direction: row
    }

    .grid .row {
      display: flex;
      justify-content: center;
      flex-direction: column;
      margin: 1px;
      background-color: #f5f5f5
    }

    .col2 {
      flex-basis: calc(50% - 2px)
    }

    .col1 {
      flex-basis: calc(100% - 2px)
    }

    .grid .row > div {
      display: flex;
      justify-content: center;
      align-items: center;
      flex-direction: column
    }
  </style>
</head>
<body>
  <div class="grid"></div>
  <script id="template" type="x-tmpl-mustache">
    <div class="row {{col}}">
      <div id="chart{{id}}">
        <h3>{{desc}}</h3>
        <div class="ct-chart ct-octave"></div>
      </div>
    </div>
  </script>
  <script src="https://code.jquery.com/jquery-3.1.1.slim.min.js"></script>
  <script src="https://cdn.jsdelivr.net/chartist.js/latest/chartist.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/mustache.js/2.3.0/mustache.min.js"></script>
  <script>
    const template = $('#template').html()

    function stackedBar(id, labels, series, desc, col) {
      $('.grid').append(Mustache.render(template, {
        id, col, desc
      }))

      new Chartist.Bar('#chart' + id + ' > div', {
        labels: labels,
        series: series
      }, {
        stackBars: true,
        axisY: {
          labelInterpolationFnc: function(value) {
            return Number.isInteger(value) ? value : null;
          }
        }
      }).on('draw', function (data) {
        if (data.type === 'bar') {
          data.element.attr({
            style: 'stroke-width: 0px'
          });

          for (var s = 0; s < data.series.length; ++s) {
            if (data.seriesIndex === s) {
              data.element.animate({
                y2: {
                  begin:  s * 500,
                  dur:    500,
                  from:   data.y1,
                  to:     data.y2,
                  easing: Chartist.Svg.Easing.easeOutSine
                },
                'stroke-width': {
                  begin: s * 500,
                  dur:   1,
                  from:  0,
                  to:    30,
                  fill:  'freeze'
                }
              }, false);
            }
          }
        }
      });
    }

    stackedBar(
      3,
      ['Saxony', 'Rusviet', 'Nordic', 'Polania', 'Crimea'],
      [
        [1, 0, 2, 0, 1], // Δημήτρης
        [1, 0, 1, 1, 0], // Παναγιώτης
        [1, 0, 0, 0, 0], // Έλενα
        [1, 1, 0, 0, 2], // Κώστας
        [0, 1, 0, 0, 0]  // Καλλιόπη
      ],
      'Wins by country',
      'col2'
    )

    stackedBar(
      4,
      ['Industrial', 'Engineering', 'Patriotic', 'Mechanical', 'Agricultural'],
      [
        [3, 0, 0, 1, 0], // Δημήτρης
        [0, 0, 2, 0, 1], // Παναγιώτης
        [1, 0, 0, 0, 0], // Έλενα
        [1, 1, 0, 2, 0], // Κώστας
        [1, 0, 0, 0, 0]  // Καλλιόπη
      ],
      'Wins by board',
      'col2'
    )

    stackedBar(
      1,
      ['Dimitris', 'Panagiotis', 'Elena', 'Kostas', 'Kalliopi'],
      //['Δημήτρης', 'Παναγιώτης', 'Έλενα', 'Κώστας', 'Καλλιόπη'],
      [
        [4, 0, 0, 0, 0], // Δημήτρης
        [0, 3, 0, 0, 0], // Παναγιώτης
        [0, 0, 1, 0, 0], // Έλενα
        [0, 0, 0, 4, 0], // Κώστας
        [0, 0, 0, 0, 1]  // Καλλιόπη
      ],
      'Wins',
      'col2'
    )

    stackedBar(
      2,
      ['Dimitris', 'Panagiotis', 'Elena', 'Kostas', 'Kalliopi'],
      [
        [(64 + 66)/2, 0, 0, 0, 0], // Δημήτρης
        [0, (99 + 78 + 68)/3, 0, 0, 0], // Παναγιώτης
        [0, 0, 0, 0, 0], // Έλενα
        [0, 0, 0, (57 + 75 + 80)/3, 0], // Κώστας
        [0, 0, 0, 0, 54/1]  // Καλλιόπη
      ],
      'Average winning points',
      'col2'
    )

    /*stackedBar(
      5,
      [
        'Saxony Industrial', 'Saxony Engineering', 'Saxony Patriotic', 'Saxony Mechanical', 'Saxony Agricultural',
        'Rusviet Industrial', 'Rusviet Engineering', 'Rusviet Patriotic', 'Rusviet Mechanical', 'Rusviet Agricultural',
        'Nordic Industrial', 'Nordic Engineering', 'Nordic Patriotic', 'Nordic Mechanical', 'Nordic Agricultural',
        'Polania Industrial', 'Polania Engineering', 'Polania Patriotic', 'Polania Mechanical', 'Polania Agricultural',
        'Crimea Industrial', 'Crimea Engineering', 'Crimea Patriotic', 'Crimea Mechanical', 'Crimea Agricultural'
      ],
      [
        [
          1,0,0,0,0,
          0,0,0,0,0,
          1,0,0,1,0,
          0,0,0,0,0,
          1,0,0,0,0
        ], // Δημήτρης
        [
          0,0,1,0,0,
          0,0,0,0,0,
          0,0,1,0,0,
          0,0,0,0,1,
          0,0,0,0,0
        ], // Παναγιώτης
        [
          1,0,0,0,0,
          0,0,0,0,0,
          0,0,0,0,0,
          0,0,0,0,0,
          0,0,0,0,0
        ], // Έλενα
        [
          0,0,0,1,0,
          1,0,0,0,0,
          0,0,0,0,0,
          0,0,0,0,0,
          0,1,0,1,0
        ], // Κώστας
        [
          0,0,0,0,0,
          1,0,0,0,0,
          0,0,0,0,0,
          0,0,0,0,0,
          0,0,0,0,0
        ] // Καλλιόπη
      ], {
        'en': 'Wins by combination',
        'gr': 'Νίκες ανά συνδυασμούς'
      }
    )*/
  </script>
</body>
</html>
